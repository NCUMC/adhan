"use strict";(self["webpackChunkcma_adhan_pwa"]=self["webpackChunkcma_adhan_pwa"]||[]).push([[584],{8584:(a,r,t)=>{t.r(r),t.d(r,{default:()=>q});var e=t(9835);const h=(0,e.Uk)(" Adhan "),s={class:"q-mx-md"},i=(0,e._)("div",{class:"text-subtitle2 q-mt-md"},"Simple Prayer Time",-1),l=(0,e._)("div",null,[(0,e.Uk)("Based on Chinese Muslim Association (CMA) Calculation"),(0,e._)("br"),(0,e._)("a",{class:"text-white",href:"https://thpc.taiwantrade.com/Taiwan_mosque#a2"},"Source")],-1),o=(0,e._)("div",{class:"text-h5 q-mt-md"}," Settings ",-1),u=(0,e._)("label",null,"Location",-1),n=(0,e._)("div",{class:"text-h5 q-mt-lg"}," Export ",-1);function c(a,r,t,c,g,d){const b=(0,e.up)("q-img"),p=(0,e.up)("q-avatar"),m=(0,e.up)("q-toolbar-title"),f=(0,e.up)("q-btn"),D=(0,e.up)("q-toolbar"),I=(0,e.up)("q-header"),A=(0,e.up)("q-select"),M=(0,e.up)("q-drawer"),F=(0,e.up)("router-view"),j=(0,e.up)("q-page-container"),w=(0,e.up)("q-layout");return(0,e.wg)(),(0,e.j4)(w,{view:"hHh lpR fFf"},{default:(0,e.w5)((()=>[(0,e.Wm)(I,{class:"bg-white text-dark"},{default:(0,e.w5)((()=>[(0,e.Wm)(D,null,{default:(0,e.w5)((()=>[(0,e.Wm)(m,null,{default:(0,e.w5)((()=>[(0,e.Wm)(p,{size:"sm",class:"q-ml-md"},{default:(0,e.w5)((()=>[(0,e.Wm)(b,{src:"icons/icon-256x256.png"})])),_:1}),h])),_:1}),(0,e.Wm)(f,{dense:"",flat:"",round:"",icon:"menu",onClick:c.toggleRightDrawer},null,8,["onClick"])])),_:1})])),_:1}),(0,e.Wm)(M,{modelValue:c.rightDrawerOpen,"onUpdate:modelValue":r[1]||(r[1]=a=>c.rightDrawerOpen=a),side:"right",overlay:"",class:"bg-secondary text-white"},{default:(0,e.w5)((()=>[(0,e._)("div",s,[i,l,o,u,(0,e.Wm)(A,{dense:"",filled:"","bg-color":"white","emit-value":"","map-options":"",modelValue:c.offset,"onUpdate:modelValue":r[0]||(r[0]=a=>c.offset=a),"label-color":"white",options:g.locationList},null,8,["modelValue","options"]),n,(0,e.Wm)(f,{onClick:d.exportDailyCSV,color:"white","text-color":"secondary",icon:"download",label:"Export Daily Timetable CSV",class:"full-width q-mt-sm"},null,8,["onClick"])])])),_:1},8,["modelValue"]),(0,e.Wm)(j,null,{default:(0,e.w5)((()=>[(0,e.Wm)(F,{offset:c.offset},null,8,["offset"])])),_:1})])),_:1})}t(702),t(4641),t(3269);var g=t(499),d=t(562);const b={data(){return{locationList:[{label:"Taipei",value:0},{label:"Taoyuan, Yanmai",value:2},{label:"Hsinchu, Taichung, Changhua",value:3},{label:"Chiayi, Tainan, Kaoshiung, Pingtung",value:5}]}},setup(){const a=(0,g.iH)(!1),r=(0,g.iH)(2);return{rightDrawerOpen:a,offset:r,toggleRightDrawer(){a.value=!a.value}}},mounted(){var a=this.offset;try{a=parseInt(localStorage.getItem("offset")),isNaN(a)&&(a=2),localStorage.setItem("offset",a),this.offset=a}catch(r){console.log(r),localStorage.setItem("offset",2),this.offset=2}},methods:{updateOffset(a){localStorage.setItem("offset",a),this.offset=a},clusterSet(a){return a<11?0:a<21?1:2},calculateSunrise(a){const[r,t]=a.split(":").map(Number);let e=60*r+t+65;e>=1440&&(e-=1440);const h=Math.floor(e/60),s=e%60;return`${String(h).padStart(2,"0")}:${String(s).padStart(2,"0")}`},applyOffset(a,r){const[t,e]=a.split(":").map(Number);let h=60*t+e+parseInt(r);h>=1440&&(h-=1440),h<0&&(h+=1440);const s=Math.floor(h/60),i=h%60;return`${String(s).padStart(2,"0")}:${String(i).padStart(2,"0")}`},isLeapYear(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth(a,r){const t=[31,28,31,30,31,30,31,31,30,31,30,31];return 1===a&&this.isLeapYear(r)?29:t[a]},getPrayerTimesForDate(a){const r=a.getMonth(),t=a.getDate(),e=this.clusterSet(t),h=d[r]||[],s=h[e]||{},i={},l=["Fajr","Dhuhr","Asr","Maghrib","Isha"];return l.forEach((a=>{const r=s[a]||"00:00";i[a]=this.applyOffset(r,this.offset)})),i},formatDate(a){const r=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),e=String(a.getDate()).padStart(2,"0");return`${r}-${t}-${e}`},exportDailyCSV(){const a=(new Date).getFullYear(),r=[];r.push("DATE,FAJR,SUNRISE,DHUHR,ASR,MAGHRIB,ISHA");for(let s=0;s<12;s++){const t=this.getDaysInMonth(s,a);for(let e=1;e<=t;e++){const t=new Date(a,s,e),h=this.getPrayerTimesForDate(t),i=this.calculateSunrise(h.Fajr),l=[this.formatDate(t),h.Fajr,i,h.Dhuhr,h.Asr,h.Maghrib,h.Isha].join(",");r.push(l)}}const t=r.join("\n"),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");if(void 0!==h.download){const r=URL.createObjectURL(e);h.setAttribute("href",r),h.setAttribute("download",`daily_prayer_timetable_${a}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)}}}};var p=t(1639),m=t(7605),f=t(6602),D=t(1663),I=t(1973),A=t(1357),M=t(335),F=t(9379),j=t(3655),w=t(3358),S=t(2133),v=t(9984),y=t.n(v);const _=(0,p.Z)(b,[["render",c]]),q=_;y()(b,"components",{QLayout:m.Z,QHeader:f.Z,QToolbar:D.Z,QToolbarTitle:I.Z,QAvatar:A.Z,QImg:M.Z,QBtn:F.Z,QDrawer:j.Z,QSelect:w.Z,QPageContainer:S.Z})},562:a=>{a.exports=JSON.parse('[[{"Fajr":"05:31","Dhuhr":"12:21","Asr":"15:51","Maghrib":"17:27","Isha":"18:57"},{"Fajr":"05:31","Dhuhr":"12:25","Asr":"15:57","Maghrib":"17:34","Isha":"19:04"},{"Fajr":"05:30","Dhuhr":"12:27","Asr":"16:01","Maghrib":"17:43","Isha":"19:13"}],[{"Fajr":"05:27","Dhuhr":"12:28","Asr":"16:04","Maghrib":"17:50","Isha":"19:20"},{"Fajr":"05:21","Dhuhr":"12:28","Asr":"16:05","Maghrib":"17:56","Isha":"19:26"},{"Fajr":"05:14","Dhuhr":"12:27","Asr":"16:06","Maghrib":"17:59","Isha":"19:29"}],[{"Fajr":"05:07","Dhuhr":"12:26","Asr":"16:07","Maghrib":"18:03","Isha":"19:33"},{"Fajr":"04:57","Dhuhr":"12:24","Asr":"16:07","Maghrib":"18:10","Isha":"19:40"},{"Fajr":"04:47","Dhuhr":"12:21","Asr":"16:07","Maghrib":"18:15","Isha":"19:45"}],[{"Fajr":"04:36","Dhuhr":"12:18","Asr":"16:06","Maghrib":"18:19","Isha":"19:49"},{"Fajr":"04:26","Dhuhr":"12:15","Asr":"16:04","Maghrib":"18:24","Isha":"19:54"},{"Fajr":"04:16","Dhuhr":"12:12","Asr":"16:05","Maghrib":"18:29","Isha":"19:59"}],[{"Fajr":"04:08","Dhuhr":"12:11","Asr":"16:07","Maghrib":"18:33","Isha":"20:03"},{"Fajr":"04:02","Dhuhr":"12:10","Asr":"16:08","Maghrib":"18:39","Isha":"20:09"},{"Fajr":"03:57","Dhuhr":"12:11","Asr":"16:10","Maghrib":"18:44","Isha":"20:14"}],[{"Fajr":"03:54","Dhuhr":"12:13","Asr":"16:13","Maghrib":"18:48","Isha":"20:18"},{"Fajr":"03:55","Dhuhr":"12:15","Asr":"16:16","Maghrib":"18:51","Isha":"20:21"},{"Fajr":"03:57","Dhuhr":"12:17","Asr":"16:17","Maghrib":"18:53","Isha":"20:23"}],[{"Fajr":"04:01","Dhuhr":"12:19","Asr":"16:19","Maghrib":"18:53","Isha":"20:23"},{"Fajr":"04:06","Dhuhr":"12:20","Asr":"16:20","Maghrib":"18:52","Isha":"20:22"},{"Fajr":"04:11","Dhuhr":"12:20","Asr":"16:20","Maghrib":"18:49","Isha":"20:19"}],[{"Fajr":"04:15","Dhuhr":"12:20","Asr":"16:18","Maghrib":"18:44","Isha":"20:14"},{"Fajr":"04:20","Dhuhr":"12:19","Asr":"16:15","Maghrib":"18:37","Isha":"20:07"},{"Fajr":"04:24","Dhuhr":"12:17","Asr":"16:10","Maghrib":"18:29","Isha":"19:59"}],[{"Fajr":"04:28","Dhuhr":"12:14","Asr":"16:05","Maghrib":"18:18","Isha":"19:48"},{"Fajr":"04:32","Dhuhr":"12:10","Asr":"16:00","Maghrib":"18:08","Isha":"19:38"},{"Fajr":"04:36","Dhuhr":"12:06","Asr":"15:54","Maghrib":"17:57","Isha":"19:27"}],[{"Fajr":"04:40","Dhuhr":"12:03","Asr":"15:49","Maghrib":"17:46","Isha":"19:16"},{"Fajr":"04:45","Dhuhr":"12:00","Asr":"15:41","Maghrib":"17:36","Isha":"19:06"},{"Fajr":"04:51","Dhuhr":"11:58","Asr":"15:38","Maghrib":"17:26","Isha":"18:56"}],[{"Fajr":"04:57","Dhuhr":"11:58","Asr":"15:36","Maghrib":"17:18","Isha":"18:48"},{"Fajr":"05:03","Dhuhr":"11:59","Asr":"15:33","Maghrib":"17:13","Isha":"18:43"},{"Fajr":"05:12","Dhuhr":"12:02","Asr":"15:34","Maghrib":"17:10","Isha":"18:40"}],[{"Fajr":"05:18","Dhuhr":"12:06","Asr":"15:37","Maghrib":"17:10","Isha":"18:40"},{"Fajr":"05:24","Dhuhr":"12:11","Asr":"15:40","Maghrib":"17:14","Isha":"18:44"},{"Fajr":"05:29","Dhuhr":"12:17","Asr":"15:46","Maghrib":"17:20","Isha":"18:50"}]]')}}]);